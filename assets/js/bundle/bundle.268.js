"use strict";(self.webpackChunkfin_track_ui=self.webpackChunkfin_track_ui||[]).push([[268],{2268:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(3029),l=n(2901),r=n(4441),o=n(3954),s=n(5501),i=n(4467),u=n(6540),c=n(1820),m=n(1967);function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function h(e){var t,n,a;return{name:(null===(t=e.rule)||void 0===t?void 0:t.name)||"",contains:(null===(n=e.rule)||void 0===n?void 0:n.contains)||"",tag:(null===(a=e.rule)||void 0===a?void 0:a.tag)||""}}var f=function(e){function t(e){var n,l,s,c;return(0,a.A)(this,t),l=this,s=t,c=[e],s=(0,o.A)(s),n=(0,r.A)(l,d()?Reflect.construct(s,c||[],(0,o.A)(l).constructor):s.apply(l,c)),(0,i.A)(n,"handleChange",(function(e){n.setState((0,i.A)({},e.target.name,e.target.value))})),(0,i.A)(n,"handleSubmit",(function(e){var t;e.preventDefault();var a,l=n.state,r=l.name,o=l.contains,s=l.tag;(a={_id:(null===(t=n.props.rule)||void 0===t?void 0:t._id)||null,name:r,contains:o,tag:s},m.A.post("/api/v1/rule",a)).then((function(e){return n.props.onSave(e)}))})),(0,i.A)(n,"onSubmitClick",(function(){n.formRef.current&&n.formRef.current.requestSubmit()})),n.state=h(e),n.formRef=u.createRef(),n}return(0,s.A)(t,e),(0,l.A)(t,[{key:"componentDidUpdate",value:function(e){e.rule!==this.props.rule&&this.setState(h(this.props))}},{key:"getModalTitle",value:function(){return this.props.rule?"Edit Rule":"Add Rule"}},{key:"getModalBody",value:function(){var e=this.state,t=e.name,n=e.contains,a=e.tag;return u.createElement("form",{ref:this.formRef,onSubmit:this.handleSubmit},u.createElement("div",{className:"mb-2"},u.createElement("label",{className:"form-label"},"Name"),u.createElement("input",{type:"text",className:"form-control",name:"name",value:t,onChange:this.handleChange,required:!0})),u.createElement("div",{className:"mb-2"},u.createElement("label",{className:"form-label"},"Contains"),u.createElement("input",{type:"text",className:"form-control",name:"contains",value:n,onChange:this.handleChange,required:!0})),u.createElement("div",{className:"mb-2"},u.createElement("label",{className:"form-label"},"Tag"),u.createElement("input",{type:"text",className:"form-control",name:"tag",value:a,onChange:this.handleChange,required:!0})))}},{key:"render",value:function(){return u.createElement(c.A,{show:this.props.show,title:this.getModalTitle(),body:this.getModalBody(),onClose:this.props.onClose,onSubmitClick:this.onSubmitClick})}}])}(u.Component),g=n(2543);function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var p=function(e){function t(){var e,n,l,s;(0,a.A)(this,t);for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return n=this,l=t,s=[].concat(c),l=(0,o.A)(l),e=(0,r.A)(n,v()?Reflect.construct(l,s||[],(0,o.A)(n).constructor):l.apply(n,s)),(0,i.A)(e,"state",{getRulesLoadingStatus:!1,rules:[],selectedRule:null,showModal:!1}),(0,i.A)(e,"toggleModal",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n){e.setState({showModal:!e.state.showModal,selectedRule:t},n)}))})),(0,i.A)(e,"handleSave",(function(t){var n=g.find(e.state.rules,{_id:t._id});n?g.assign(n,t):e.state.rules.push(t),e.toggleModal()})),(0,i.A)(e,"handleDelete",(function(t){var n;(n=t,m.A.delete("/api/v1/rule/".concat(n))).then(e.getRules)})),(0,i.A)(e,"getRules",(function(){e.setState({getRulesLoadingStatus:!0},(function(){m.A.get("/api/v1/rules").then((function(t){e.setState({getRulesLoadingStatus:!1,rules:t.rules})}))}))})),e}return(0,s.A)(t,e),(0,l.A)(t,[{key:"getLoader",value:function(){return this.state.getRulesLoadingStatus&&u.createElement("div",{className:"spinner-border text-primary",role:"status"},u.createElement("span",{className:"visually-hidden"},"Loading..."))}},{key:"getRulesContainer",value:function(){var e=this,t=this.state.rules;return 0===t.length?this.state.getRulesLoadingStatus?this.getLoader():u.createElement("div",{className:"alert alert-info",role:"alert"},"No rules found"):u.createElement("div",{className:"row"},t.map((function(t,n){return u.createElement("div",{key:n,className:"col-md-4 mb-3"},u.createElement("div",{className:"card shadow-sm"},u.createElement("div",{className:"card-body"},u.createElement("h5",{className:"card-title"},t.name),u.createElement("p",{className:"card-text"},u.createElement("strong",null,"Contains:")," ",t.contains),u.createElement("span",{className:"badge bg-primary"},t.tag),u.createElement("div",{className:"mt-3 d-flex justify-content-between"},u.createElement("button",{className:"btn btn-warning btn-sm",onClick:function(){return e.toggleModal(t)}},u.createElement("i",{className:"bi bi-pencil"})," Edit"),u.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.handleDelete(t._id)}},u.createElement("i",{className:"bi bi-trash"})," Delete")))))})))}},{key:"getCrudRuleModal",value:function(){var e=this;return u.createElement(f,{show:this.state.showModal,rule:this.state.selectedRule,onSave:this.handleSave,onClose:function(){return e.toggleModal()}})}},{key:"getAddButton",value:function(){var e=this;return u.createElement("button",{className:"btn btn-primary rounded-circle position-fixed bottom-0 end-0 m-4",onClick:function(){return e.toggleModal()},style:{width:"50px",height:"50px"}},"+")}},{key:"render",value:function(){var e=this.state;return e.rules,e.showModal,e.selectedRule,u.createElement("div",{className:"container mt-3"},u.createElement("h1",null,"Rules"),this.getRulesContainer(),this.getCrudRuleModal(),this.getAddButton())}},{key:"componentDidMount",value:function(){this.getRules()}}])}(u.Component)}}]);