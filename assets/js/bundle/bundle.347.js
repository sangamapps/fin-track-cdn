"use strict";(self.webpackChunkfin_track_ui=self.webpackChunkfin_track_ui||[]).push([[347],{2347:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(3029),o=n(2901),c=n(4441),r=n(3954),u=n(5501),l=n(4467),s=n(6540),i=n(5474),m=n(1820),d=n(8573);function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function h(e){var t,n,a,o;return{accountGroup:(null===(t=e.account)||void 0===t?void 0:t.accountGroup)||"",name:(null===(n=e.account)||void 0===n?void 0:n.name)||"",amount:(null===(a=e.account)||void 0===a?void 0:a.amount)||"",description:(null===(o=e.account)||void 0===o?void 0:o.description)||""}}var p=function(e){function t(e){var n,o,u,i;return(0,a.A)(this,t),o=this,u=t,i=[e],u=(0,r.A)(u),n=(0,c.A)(o,f()?Reflect.construct(u,i||[],(0,r.A)(o).constructor):u.apply(o,i)),(0,l.A)(n,"handleChange",(function(e){n.setState((0,l.A)({},e.target.name,e.target.value))})),(0,l.A)(n,"handleSubmit",(function(e){var t;e.preventDefault();var a=n.state,o=a.accountGroup,c=a.name,r=a.amount,u=a.description;d.A.upsert({_id:(null===(t=n.props.account)||void 0===t?void 0:t._id)||null,accountGroup:o,name:c,amount:parseFloat(r),description:u}).then((function(e){return n.props.onSave(e)}))})),(0,l.A)(n,"onSubmitClick",(function(){n.formRef.current&&n.formRef.current.requestSubmit()})),n.state=h(e),n.formRef=s.createRef(),n}return(0,u.A)(t,e),(0,o.A)(t,[{key:"componentDidUpdate",value:function(e){e.account!==this.props.account&&this.setState(h(this.props))}},{key:"getModalTitle",value:function(){return this.props.account?"Edit Account":"Add Account"}},{key:"getModalBody",value:function(){var e=this.state,t=e.accountGroup,n=e.name,a=e.amount,o=e.description;return s.createElement("form",{ref:this.formRef,onSubmit:this.handleSubmit},s.createElement("div",{className:"mb-2"},s.createElement("label",{className:"form-label"},"Account Group"),s.createElement("select",{className:"form-control",name:"accountGroup",value:t,onChange:this.handleChange,required:!0},s.createElement("option",null),Object.keys(i._).map((function(e,t){return s.createElement("option",{key:t,value:e},i._[e])})))),s.createElement("div",{className:"mb-2"},s.createElement("label",{className:"form-label"},"Name"),s.createElement("input",{type:"text",className:"form-control",name:"name",value:n,onChange:this.handleChange,required:!0})),s.createElement("div",{className:"mb-2"},s.createElement("label",{className:"form-label"},"Amount"),s.createElement("input",{type:"number",className:"form-control",name:"amount",value:a,onChange:this.handleChange})),s.createElement("div",{className:"mb-2"},s.createElement("label",{className:"form-label"},"Description"),s.createElement("textarea",{className:"form-control",name:"description",value:o,onChange:this.handleChange})))}},{key:"render",value:function(){return s.createElement(m.A,{show:this.props.show,title:this.getModalTitle(),body:this.getModalBody(),onClose:this.props.onClose,onSubmitClick:this.onSubmitClick})}}])}(s.Component),v=n(2543);function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var A=function(e){function t(){var e,n,o,u;(0,a.A)(this,t);for(var s=arguments.length,i=new Array(s),m=0;m<s;m++)i[m]=arguments[m];return n=this,o=t,u=[].concat(i),o=(0,r.A)(o),e=(0,c.A)(n,g()?Reflect.construct(o,u||[],(0,r.A)(n).constructor):o.apply(n,u)),(0,l.A)(e,"state",{getAccountsLoadingStatus:!1,accounts:[],selectedAccount:null,showModal:!1}),(0,l.A)(e,"toggleModal",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n){e.setState({showModal:!e.state.showModal,selectedAccount:t},n)}))})),(0,l.A)(e,"handleSave",(function(t){var n=v.find(e.state.accounts,{_id:t._id});n?v.assign(n,t):e.state.accounts.push(t),e.toggleModal()})),(0,l.A)(e,"handleDelete",(function(t){d.A.delete(t).then(e.getAccounts)})),(0,l.A)(e,"getAccounts",(function(){e.setState({getAccountsLoadingStatus:!0},(function(){d.A.getAll().then((function(t){e.setState({getAccountsLoadingStatus:!1,accounts:t.accounts})}))}))})),e}return(0,u.A)(t,e),(0,o.A)(t,[{key:"getLoader",value:function(){return this.state.getAccountsLoadingStatus&&s.createElement("div",{className:"spinner-border text-primary",role:"status"},s.createElement("span",{className:"visually-hidden"},"Loading..."))}},{key:"getAccountsContainer",value:function(){var e=this,t=this.state.accounts;if(0===t.length)return this.state.getAccountsLoadingStatus?this.getLoader():s.createElement("div",{className:"alert alert-info",role:"alert"},"No accounts found");var n=t.reduce((function(e,t){return e[t.accountGroup]||(e[t.accountGroup]=[]),e[t.accountGroup].push(t),e}),{});return Object.keys(n).map((function(t){return s.createElement("div",{key:t,className:"mt-3"},s.createElement("h3",null,i._[t]),s.createElement("ul",{className:"list-group"},n[t].map((function(t){return s.createElement("li",{key:t._id,className:"list-group-item d-flex justify-content-between align-items-center"},s.createElement("div",null,s.createElement("strong",null,t.name),s.createElement("p",{className:"mb-0 text-muted"},t.description)),s.createElement("div",null,s.createElement("span",{className:"badge bg-success me-2"},"â‚¹",t.amount),s.createElement("button",{className:"btn btn-sm btn-warning me-2",onClick:function(){return e.toggleModal(t)}},"Edit"),s.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return e.handleDelete(t._id)}},"Delete")))}))))}))}},{key:"getCrudAccountModal",value:function(){var e=this;return s.createElement(p,{show:this.state.showModal,account:this.state.selectedAccount,onSave:this.handleSave,onClose:function(){return e.toggleModal()}})}},{key:"getAddButton",value:function(){var e=this;return s.createElement("button",{className:"btn btn-primary rounded-circle position-fixed bottom-0 end-0 m-4",onClick:function(){return e.toggleModal()},style:{width:"50px",height:"50px"}},"+")}},{key:"render",value:function(){return s.createElement("div",{className:"container mt-3"},s.createElement("h1",null,"Accounts"),this.getAccountsContainer(),this.getCrudAccountModal(),this.getAddButton())}},{key:"componentDidMount",value:function(){this.getAccounts()}}])}(s.Component)},5474:(e,t,n)=>{n.d(t,{E:()=>a,_:()=>o});var a="681626859343-dtkml0ds42u48qg1q5nr07kevma99tfk.apps.googleusercontent.com",o={bank:"Bank",cash:"Cash",credit_card:"Credit Card"}},8573:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(1967);const o={getAll:function(){return a.A.get("/api/v1/accounts")},upsert:function(e){return a.A.post("/api/v1/account",e)},delete:function(e){return a.A.delete("/api/v1/account/".concat(e))}}}}]);