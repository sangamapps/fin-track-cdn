"use strict";(self.webpackChunkfin_track_ui=self.webpackChunkfin_track_ui||[]).push([[4],{4:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(3029),l=n(2901),r=n(4441),o=n(3954),s=n(5501),u=n(4467),i=n(6540),c=n(756),d=n(7886),m=n(2543);function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var f=function(e){function t(){var e,n,l,s;(0,a.A)(this,t);for(var i=arguments.length,c=new Array(i),f=0;f<i;f++)c[f]=arguments[f];return n=this,l=t,s=[].concat(c),l=(0,o.A)(l),e=(0,r.A)(n,h()?Reflect.construct(l,s||[],(0,o.A)(n).constructor):l.apply(n,s)),(0,u.A)(e,"state",{getRulesLoadingStatus:!1,rules:[],selectedRule:null,showModal:!1}),(0,u.A)(e,"toggleModal",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n){e.setState({showModal:!e.state.showModal,selectedRule:t},n)}))})),(0,u.A)(e,"handleSave",(function(t){var n=m.find(e.state.rules,{_id:t._id});n?m.assign(n,t):e.state.rules.push(t),e.toggleModal()})),(0,u.A)(e,"handleDelete",(function(t){d.A.delete(t).then(e.getRules)})),(0,u.A)(e,"getRules",(function(){e.setState({getRulesLoadingStatus:!0},(function(){d.A.getAll().then((function(t){e.setState({getRulesLoadingStatus:!1,rules:t.rules})}))}))})),e}return(0,s.A)(t,e),(0,l.A)(t,[{key:"getRulesContainer",value:function(){var e=this,t=this.state.rules;return 0===t.length?this.state.getRulesLoadingStatus?i.createElement("div",{className:"spinner-border text-primary",role:"status"},i.createElement("span",{className:"visually-hidden"},"Loading...")):i.createElement("div",{className:"alert alert-info",role:"alert"},"No rules found"):i.createElement("div",{className:"row"},t.map((function(t,n){return i.createElement("div",{key:n,className:"col-md-4 mb-3"},i.createElement("div",{className:"card shadow-sm"},i.createElement("div",{className:"card-body"},i.createElement("h5",{className:"card-title"},t.name),i.createElement("p",{className:"card-text"},i.createElement("strong",null,"Contains:")," ",t.contains),i.createElement("span",{className:"badge bg-primary"},t.tag),i.createElement("div",{className:"mt-3 d-flex justify-content-between"},i.createElement("button",{className:"btn btn-warning btn-sm",onClick:function(){return e.toggleModal(t)}},i.createElement("i",{className:"bi bi-pencil"})," Edit"),i.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.handleDelete(t._id)}},i.createElement("i",{className:"bi bi-trash"})," Delete")))))})))}},{key:"getCrudRuleModal",value:function(){var e=this;return i.createElement(c.A,{show:this.state.showModal,rule:this.state.selectedRule,onSave:this.handleSave,onClose:function(){return e.toggleModal()}})}},{key:"getAddButton",value:function(){var e=this;return i.createElement("button",{className:"btn btn-primary rounded-circle position-fixed bottom-0 end-0 m-4",onClick:function(){return e.toggleModal()},style:{width:"50px",height:"50px"}},"+")}},{key:"render",value:function(){var e=this.state;return e.rules,e.showModal,e.selectedRule,i.createElement("div",{className:"container mt-3"},i.createElement("h1",null,"Rules"),this.getRulesContainer(),this.getCrudRuleModal(),this.getAddButton())}},{key:"componentDidMount",value:function(){this.getRules()}}])}(i.Component)},756:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(3029),l=n(2901),r=n(4441),o=n(3954),s=n(5501),u=n(4467),i=n(6540),c=n(1820),d=n(7886);function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function h(e){var t,n,a;return{name:(null===(t=e.rule)||void 0===t?void 0:t.name)||"",contains:(null===(n=e.rule)||void 0===n?void 0:n.contains)||"",tag:(null===(a=e.rule)||void 0===a?void 0:a.tag)||""}}var f=function(e){function t(e){var n,l,s,c;return(0,a.A)(this,t),l=this,s=t,c=[e],s=(0,o.A)(s),n=(0,r.A)(l,m()?Reflect.construct(s,c||[],(0,o.A)(l).constructor):s.apply(l,c)),(0,u.A)(n,"handleChange",(function(e){n.setState((0,u.A)({},e.target.name,e.target.value))})),(0,u.A)(n,"handleSubmit",(function(e){var t;e.preventDefault();var a=n.state,l=a.name,r=a.contains,o=a.tag;d.A.upsert({_id:(null===(t=n.props.rule)||void 0===t?void 0:t._id)||null,name:l,contains:r,tag:o}).then((function(e){return n.props.onSave(e)}))})),(0,u.A)(n,"onSubmitClick",(function(){n.formRef.current&&n.formRef.current.requestSubmit()})),n.state=h(e),n.formRef=i.createRef(),n}return(0,s.A)(t,e),(0,l.A)(t,[{key:"componentDidUpdate",value:function(e){e.rule!==this.props.rule&&this.setState(h(this.props))}},{key:"getModalTitle",value:function(){var e;return null!==(e=this.props.rule)&&void 0!==e&&e._id?"Edit Rule":"Add Rule"}},{key:"getModalBody",value:function(){var e=this.state,t=e.name,n=e.contains,a=e.tag;return i.createElement("form",{ref:this.formRef,onSubmit:this.handleSubmit},i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Name"),i.createElement("input",{type:"text",className:"form-control",name:"name",value:t,onChange:this.handleChange,required:!0})),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Contains"),i.createElement("textarea",{className:"form-control",name:"contains",value:n,onChange:this.handleChange,required:!0})),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Tag"),i.createElement("input",{type:"text",className:"form-control",name:"tag",value:a,onChange:this.handleChange,required:!0})))}},{key:"render",value:function(){return i.createElement(c.A,{show:this.props.show,title:this.getModalTitle(),body:this.getModalBody(),onClose:this.props.onClose,onSubmitClick:this.onSubmitClick})}}])}(i.Component)},7886:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(1967);const l={getAll:function(){return a.A.get("/api/v1/rules")},upsert:function(e){return a.A.post("/api/v1/rule",e)},delete:function(e){return a.A.delete("/api/v1/rule/".concat(e))}}}}]);