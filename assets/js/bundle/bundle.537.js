"use strict";(self.webpackChunkfin_track_ui=self.webpackChunkfin_track_ui||[]).push([[537],{1967:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(4467),r=n(467),c=n(4756),s=n.n(c),o=n(1083);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){return m.apply(this,arguments)}function m(){return m=(0,r.A)(s().mark((function e(t,n){var a,r,c,l=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3?l[3]:void 0,r=i({url:t,method:n},l.length>2&&void 0!==l[2]?l[2]:{}),a&&(r.headers=a),e.next=6,(0,o.A)(r);case 6:return c=e.sent,e.abrupt("return",c.data);case 8:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}const d={get:function(e,t){return u(e,"GET",{params:t})},post:function(e,t,n){return u(e,"POST",{data:t},n)},delete:function(e){return u(e,"DELETE")}}},5537:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(3029),r=n(2901),c=n(4441),s=n(3954),o=n(5501),l=n(6540),i=n(467),u=n(4467),m=n(4756),d=n.n(m),p=n(378),f=(n(8573),n(1967));var h=n(2543);function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var E={HDFC_AS_XLS_V1:"HDFC - XLS - V1",SBI_AS_XLS_V1:"SBI - XLS - V1",AXIS_AS_PDF_V1:"AXIS - PDF - V1"},b=["date","description","debit","credit","balance"],y=function(e){function t(){var e,n,r,o;(0,a.A)(this,t);for(var l=arguments.length,m=new Array(l),h=0;h<l;h++)m[h]=arguments[h];return n=this,r=t,o=[].concat(m),r=(0,s.A)(r),e=(0,c.A)(n,v()?Reflect.construct(r,o||[],(0,s.A)(n).constructor):r.apply(n,o)),(0,u.A)(e,"state",{chosenExtractor:Object.keys(E)[0],chosenFile:null,transactions:[],processed_transactions:[],extractionStatus:0,extracted:0}),(0,u.A)(e,"getTransactions",(function(){if(!e.state.chosenFile)return p.oR.warn("Please select a file");var t,n,a;e.setState({extractionStatus:1,extracted:0}),(t=e.state.chosenExtractor,n=e.state.chosenFile,a=new FormData,a.append("extractor",t),a.append("file",n),f.A.post("/api/v1/transactions/extract",a,{"Content-Type":"multipart/form-data"})).then((function(t){e.setState({transactions:t.transactions,processed_transactions:t.processed_transactions,extractionStatus:0,extracted:1})})).catch((function(t){e.setState({transactions:[],processed_transactions:[],extractionStatus:0,extracted:0}),p.oR.error(t.message)}))})),(0,u.A)(e,"handleExtractorChange",(function(t){e.setState({chosenExtractor:t.target.value,transactions:[],processed_transactions:[],extracted:0})})),(0,u.A)(e,"handleFileUpload",function(){var t=(0,i.A)(d().mark((function t(n){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target.files[0]){t.next=3;break}return t.abrupt("return",e.setState({chosenFile:null,transactions:[],processed_transactions:[],extracted:0}));case 3:e.setState({chosenFile:a,transactions:[],processed_transactions:[],extracted:0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return(0,o.A)(t,e),(0,r.A)(t,[{key:"showExtractionStatus",value:function(){if(0!==this.state.extractionStatus)return l.createElement("div",{className:"mt-4 d-flex justify-content-center"},l.createElement("div",{className:"spinner-border text-primary text-center",role:"status"},l.createElement("span",{className:"visually-hidden"},"Loading...")))}},{key:"showSummary",value:function(){var e=this.state.processed_transactions;if(0!==e.length){var t=h.sumBy(e,(function(e){return e.debit})),n=h.sumBy(e,(function(e){return e.credit})),a=e[e.length-1].balance;return l.createElement("div",{className:"mt-4"},l.createElement("h5",null,"Summary"),l.createElement("table",{className:"table table-bordered"},l.createElement("thead",{className:"table-dark"},l.createElement("tr",null,l.createElement("th",null,"Total Debits"),l.createElement("th",null,"Total Credits"),l.createElement("th",null,"Closing Balance"))),l.createElement("tbody",null,l.createElement("tr",null,l.createElement("td",null,t),l.createElement("td",null,n),l.createElement("td",null,a)))))}}},{key:"getColumns",value:function(e,t){return l.createElement("tr",{key:t},b.map((function(t,n){return l.createElement("td",{key:n},e[t])})))}},{key:"showTransactions",value:function(){var e=this.state.processed_transactions;return 0===e.length?this.state.chosenFile&&this.state.extracted?l.createElement("div",{className:"mt-4 alert alert-danger"}," No transactions found"):void 0:l.createElement("div",{className:"mt-4 overflow-auto"},l.createElement("h5",null,"Transactions"),l.createElement("table",{className:"table table-striped table-hover"},l.createElement("thead",{className:"table-primary"},l.createElement("tr",null,b.map((function(e,t){return l.createElement("th",{key:t},e)})))),l.createElement("tbody",null,e.map(this.getColumns))))}},{key:"render",value:function(){return l.createElement("div",{className:""},l.createElement("div",{className:"card p-3 shadow-lg"},l.createElement("h3",{className:"mb-3"},"Upload Statement"),l.createElement("div",{className:"mb-3"},l.createElement("label",{className:"form-label"},"Select Extractor"),l.createElement("select",{className:"form-select",value:this.state.chosenExtractor,onChange:this.handleExtractorChange},Object.keys(E).map((function(e,t){return l.createElement("option",{key:t,value:e},E[e])})))),l.createElement("div",{className:"mb-3"},l.createElement("label",{className:"form-label"},"Upload File"),l.createElement("input",{type:"file",className:"form-control",onChange:this.handleFileUpload})),l.createElement("div",null,l.createElement("button",{className:"btn btn-primary",onClick:this.getTransactions},"Extract"))),this.showExtractionStatus(),this.showSummary(),this.showTransactions())}}])}(l.Component);function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var x=function(e){function t(){return(0,a.A)(this,t),e=this,n=t,r=arguments,n=(0,s.A)(n),(0,c.A)(e,A()?Reflect.construct(n,r||[],(0,s.A)(e).constructor):n.apply(e,r));var e,n,r}return(0,o.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return l.createElement("div",{className:""},l.createElement(y,null))}}])}(l.Component)},8573:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(1967);const r={getAll:function(){return a.A.get("/api/v1/accounts")},upsert:function(e){return a.A.post("/api/v1/account",e)},delete:function(e){return a.A.delete("/api/v1/account/".concat(e))}}}}]);