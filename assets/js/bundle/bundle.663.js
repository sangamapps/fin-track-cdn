"use strict";(self.webpackChunkfin_track_ui=self.webpackChunkfin_track_ui||[]).push([[663],{448:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(3029),r=n(2901),o=n(4441),l=n(3954),c=n(5501),s=n(6540),i=n(6634);function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}var m=function(e){function t(){return(0,a.A)(this,t),e=this,n=t,r=arguments,n=(0,l.A)(n),(0,o.A)(e,u()?Reflect.construct(n,r||[],(0,l.A)(e).constructor):n.apply(e,r));var e,n,r}return(0,c.A)(t,e),(0,r.A)(t,[{key:"getModalTitle",value:function(){return s.createElement("h5",{className:"modal-title"},this.props.title)}},{key:"getCloseButton",value:function(){return s.createElement("button",{type:"button",className:"btn-close",onClick:this.props.onClose})}},{key:"getModalHeader",value:function(){return s.createElement("div",{className:"modal-header"},this.getModalTitle(),this.getCloseButton())}},{key:"getModalBody",value:function(){var e=this.props.body;return e&&s.createElement("div",{className:"modal-body"},e)}},{key:"getCancelButton",value:function(){return s.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.props.onClose},"Cancel")}},{key:"getSubmitButton",value:function(){return s.createElement("button",{type:"submit",className:"btn btn-dark",onClick:this.props.onSubmitClick},"Submit")}},{key:"getModalFooter",value:function(){return s.createElement("div",{className:"modal-footer"},this.getCancelButton(),this.getSubmitButton())}},{key:"render",value:function(){return s.createElement(i.A,{in:this.props.show,timeout:500,classNames:"modal-container",unmountOnExit:!0},s.createElement("div",null,s.createElement("div",{className:"modal-backdrop fade show"}),s.createElement("div",{className:"modal fade show d-block"},s.createElement("div",{className:"modal-dialog"},s.createElement("div",{className:"modal-content"},this.getModalHeader(),this.getModalBody(),this.getModalFooter())))))}}])}(s.Component)},756:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(3029),r=n(2901),o=n(4441),l=n(3954),c=n(5501),s=n(4467),i=n(6540),u=n(1225),m=n(378),d=n(448),p=n(3908);function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function h(e){var t,n,a,r;return{_id:(null===(t=e.rule)||void 0===t?void 0:t._id)||"",name:(null===(n=e.rule)||void 0===n?void 0:n.name)||"",contains:(null===(a=e.rule)||void 0===a?void 0:a.contains)||"",tag:(null===(r=e.rule)||void 0===r?void 0:r.tag)||""}}var v=function(e){function t(e){var n,r,c,u;return(0,a.A)(this,t),r=this,c=t,u=[e],c=(0,l.A)(c),n=(0,o.A)(r,f()?Reflect.construct(c,u||[],(0,l.A)(r).constructor):c.apply(r,u)),(0,s.A)(n,"handleChange",(function(e){n.setState((0,s.A)({},e.target.name,e.target.value))})),(0,s.A)(n,"handleSubmit",(function(e){e.preventDefault(),n.state.tag=n.state.tag||n.state.name,n.props.dispatch((0,p.Pv)(n.state)).then((function(e){m.oR.info("Rule saved ✅"),(n.props.onSave||n.props.onClose||function(){})(e.payload)}))})),(0,s.A)(n,"onSubmitClick",(function(){n.formRef.current&&n.formRef.current.requestSubmit()})),n.state=h(e),n.formRef=i.createRef(),n}return(0,c.A)(t,e),(0,r.A)(t,[{key:"componentDidUpdate",value:function(e){e.rule!==this.props.rule&&this.setState(h(this.props))}},{key:"getModalTitle",value:function(){var e;return null!==(e=this.props.rule)&&void 0!==e&&e._id?"Edit Rule":"Add Rule"}},{key:"getModalBody",value:function(){var e=this.state,t=e.name,n=e.contains,a=e.tag;return i.createElement("form",{ref:this.formRef,onSubmit:this.handleSubmit},i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Name"),i.createElement("input",{type:"text",className:"form-control",name:"name",value:t,onChange:this.handleChange,placeholder:"Rule Name",required:!0})),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Contains"),i.createElement("textarea",{className:"form-control",name:"contains",value:n,onChange:this.handleChange,placeholder:"Keywords (eg: Keyword1, Keyword2)",required:!0})),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Tag"),i.createElement("input",{type:"text",className:"form-control",name:"tag",value:a||t,onChange:this.handleChange,placeholder:"Tag",required:!0})))}},{key:"render",value:function(){return i.createElement(d.A,{show:this.props.show,title:this.getModalTitle(),body:this.getModalBody(),onClose:this.props.onClose,onSubmitClick:this.onSubmitClick})}}])}(i.Component);const g=(0,u.Ng)()(v)},5474:(e,t,n)=>{n.d(t,{E5:()=>r,Tv:()=>u,WB:()=>l,_Y:()=>o,jy:()=>c,nZ:()=>i,t2:()=>s});var a=n(4467),r="681626859343-dtkml0ds42u48qg1q5nr07kevma99tfk.apps.googleusercontent.com",o={bank:"Bank",cash:"Cash",credit_card:"Credit Card"},l={DATE:"date",ACCOUNT_GROUP:"accountGroup",ACCOUNT_ID:"accountId",DESCRIPTION:"description",TYPE:"transactionType",AMOUNT:"amount",DEBIT:"debit",CREDIT:"credit",BALANCE:"balance"},c=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},l.DATE,"Date"),l.ACCOUNT_GROUP,"Account Group"),l.ACCOUNT_ID,"Account"),l.TYPE,"Transaction Type"),l.AMOUNT,"Amount"),l.DESCRIPTION,"Description"),s={DEBIT:"DEBIT",CREDIT:"CREDIT"},i={DEBIT:"Debit",CREDIT:"Credit"},u={HDFC_AS_XLS_V1:"HDFC - XLS - V1",SBI_AS_XLS_V1:"SBI - XLS - V1",AXIS_AS_PDF_V1:"AXIS - PDF - V1"}},8663:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var a=n(3029),r=n(2901),o=n(4441),l=n(3954),c=n(5501),s=n(4467),i=n(6540),u=n(1225),m=n(378),d=n(8736),p=n(5474),f=n(2543);function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}var v=function(e){function t(){return(0,a.A)(this,t),e=this,n=t,r=arguments,n=(0,l.A)(n),(0,o.A)(e,h()?Reflect.construct(n,r||[],(0,l.A)(e).constructor):n.apply(e,r));var e,n,r}return(0,c.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.transactions;if(f.isEmpty(e))return i.createElement(i.Fragment,null);var t=f.groupBy(e,"transactionType"),n=f.sumBy(t[p.t2.DEBIT],(function(e){return e[p.WB.AMOUNT]})),a=f.sumBy(t[p.t2.CREDIT],(function(e){return e[p.WB.AMOUNT]}));return i.createElement("div",{className:"mt-2"},i.createElement("h3",null,"Summary"),i.createElement("table",{className:"table table-bordered text-center"},i.createElement("thead",{className:""},i.createElement("tr",{className:"table-secondary"},i.createElement("th",null,"Total Debits"),i.createElement("th",null,"Total Credits"))),i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",null,n),i.createElement("td",null,a)))))}}])}(i.Component),g=n(756),E=n(448),b=n(5093),y=n(2543);function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function A(e){var t,n,a,r,o;return{date:(null===(t=e.transaction)||void 0===t?void 0:t.date)||b().format("YYYY-MM-DD"),transactionType:(null===(n=e.transaction)||void 0===n?void 0:n.transactionType)||p.t2.DEBIT,accountId:(null===(a=e.transaction)||void 0===a?void 0:a.accountId)||"",amount:(null===(r=e.transaction)||void 0===r?void 0:r.amount)||0,description:(null===(o=e.transaction)||void 0===o?void 0:o.description)||""}}var N=function(e){function t(e){var n,r,c,u;return(0,a.A)(this,t),r=this,c=t,u=[e],c=(0,l.A)(c),n=(0,o.A)(r,T()?Reflect.construct(c,u||[],(0,l.A)(r).constructor):c.apply(r,u)),(0,s.A)(n,"handleChange",(function(e){n.setState((0,s.A)({},e.target.name,e.target.value))})),(0,s.A)(n,"handleSubmit",(function(e){e.preventDefault();var t=y.assign(n.props.transaction,n.state);t.amount=parseFloat(t.amount),n.props.isDraft&&(t.isDraft=!0),d.A.upsert(t).then((function(e){m.oR.info("Transaction saved ✅"),n.props.onSave(e.transaction)}))})),(0,s.A)(n,"onSubmitClick",(function(){n.formRef.current&&n.formRef.current.requestSubmit()})),n.state=A(e),n.formRef=i.createRef(),n}return(0,c.A)(t,e),(0,r.A)(t,[{key:"componentDidUpdate",value:function(e){e.transaction!==this.props.transaction&&this.setState(A(this.props))}},{key:"getModalTitle",value:function(){return this.props.transaction?"Edit Transaction":"Add Transaction"}},{key:"getModalBody",value:function(){var e=this.state,t=e.date,n=e.description,a=e.accountId,r=e.transactionType,o=e.amount,l=this.props.accountsMap;return i.createElement("form",{ref:this.formRef,onSubmit:this.handleSubmit},i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Date"),i.createElement("input",{type:"date",className:"form-control",name:"date",value:t,onChange:this.handleChange,required:!0})),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Transaction Type"),i.createElement("select",{className:"form-select",name:"transactionType",value:r,onChange:this.handleChange,required:!0},i.createElement("option",{value:""}),i.createElement("option",{value:"DEBIT"},"Debit"),i.createElement("option",{value:"CREDIT"},"Credit"))),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Account"),i.createElement("select",{className:"form-select",name:"accountId",value:a,onChange:this.handleChange,required:!0},i.createElement("option",{value:""}),y.values(l).map((function(e,t){return i.createElement("option",{key:t,value:e._id},e.name," (",p._Y[e.accountGroup],")")})))),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Amount"),i.createElement("input",{type:"number",className:"form-control",name:"amount",value:o,onChange:this.handleChange,required:!0})),i.createElement("div",{className:"mb-2"},i.createElement("label",{className:"form-label"},"Description"),i.createElement("input",{type:"text",className:"form-control",name:"description",value:n,onChange:this.handleChange})))}},{key:"render",value:function(){return i.createElement(E.A,{show:this.props.show,title:this.getModalTitle(),body:this.getModalBody(),onClose:this.props.onClose,onSubmitClick:this.onSubmitClick})}}])}(i.Component);const C=(0,u.Ng)((function(e){return y.pick(e.user,["accountsMap"])}))(N);var k=n(8168),D=n(9097),B=(n(4773),n(3908)),R=n(2543);function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}var S=[{component:function(){return n.e(627).then(n.bind(n,6627))},className:"col-sm-12 col-md-6 col-lg-4 mb-3"},{component:function(){return n.e(827).then(n.bind(n,8827))},className:"col-sm-12 col-md-6 col-lg-4 mb-3",props:{transactionType:"DEBIT"}},{component:function(){return n.e(827).then(n.bind(n,8827))},className:"col-sm-12 col-md-6 col-lg-4 mb-3",props:{transactionType:"CREDIT"}},{component:function(){return n.e(510).then(n.bind(n,5510))},className:"col-sm-12 col-md-6 col-lg-4 mb-3"},{component:function(){return n.e(646).then(n.bind(n,6646))},className:"col-sm-12 col-md-6 col-lg-4 mb-3"},{component:function(){return n.e(98).then(n.bind(n,7098))},className:"col-sm-12 col-md-6 col-lg-4 mb-3"}],w=function(e){function t(){var e,n,r,c;(0,a.A)(this,t);for(var i=arguments.length,u=new Array(i),m=0;m<i;m++)u[m]=arguments[m];return n=this,r=t,c=[].concat(u),r=(0,l.A)(r),e=(0,o.A)(n,M()?Reflect.construct(r,c||[],(0,l.A)(n).constructor):r.apply(n,c)),(0,s.A)(e,"state",{showStatsView:!0}),(0,s.A)(e,"handleChange",(function(t){e.props.dispatch((0,B.B0)(t.target.value))})),e}return(0,c.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.statsGroupByPeriod,a=t.filteredTransactions;return 0==a.length?i.createElement(i.Fragment,null):i.createElement("div",{className:""},i.createElement("div",{className:"mb-2 d-flex align-items-center"},i.createElement("h3",null,"Stats"),i.createElement("select",{className:"form-select w-auto ms-auto me-2",value:n,onChange:this.handleChange},i.createElement("option",{value:"daily"},"Daily"),i.createElement("option",{value:"weekly"},"Weekly"),i.createElement("option",{value:"monthly"},"Monthly"),i.createElement("option",{value:"yearly"},"Yearly"),i.createElement("option",{value:"overall"},"Overall")),i.createElement("button",{className:"btn btn-dark",onClick:function(){return e.setState({showStatsView:!e.state.showStatsView})}},this.state.showStatsView?i.createElement("i",{className:"bi bi-eye-slash-fill"}):i.createElement("i",{className:"bi bi-eye-fill"}))),this.state.showStatsView&&i.createElement("div",{className:"row"},S.map((function(e,t){return i.createElement("div",{key:t,className:e.className},i.createElement(D.A,(0,k.A)({component:e.component,timeFilter:n,filteredTransactions:a},e.props)))}))))}}])}(i.Component);const I=(0,u.Ng)((function(e){return R.pick(e.user,["statsGroupByPeriod"])}))(w);var O=n(5093),_=n(2543);function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var U=function(e){function t(){var e,n,r,c;(0,a.A)(this,t);for(var u=arguments.length,p=new Array(u),f=0;f<u;f++)p[f]=arguments[f];return n=this,r=t,c=[].concat(p),r=(0,l.A)(r),e=(0,o.A)(n,x()?Reflect.construct(r,c||[],(0,l.A)(n).constructor):r.apply(n,c)),(0,s.A)(e,"state",{showRulesModal:!1,showTransactionModal:!1,selectedTransaction:null}),(0,s.A)(e,"toggleRulesModal",(function(t){e.setState({showRulesModal:!e.state.showRulesModal,selectedTransaction:t})})),(0,s.A)(e,"handleRuleSave",(function(t){e.toggleRulesModal()})),(0,s.A)(e,"toggleTransactionModal",(function(t){e.setState({showTransactionModal:!e.state.showTransactionModal,selectedTransaction:t})})),(0,s.A)(e,"getTransaction",(function(t,n){return i.createElement("div",{key:n,className:"col-md-6 col-lg-4 mb-2"},i.createElement("div",{className:"card shadow-sm"},i.createElement("div",{className:"card-body"},e.getTags(t),e.getTransactionDate(t),e.getTransactionAccountGroup(t),e.getTransactionAccount(t),e.getTransactionAmount(t),e.getTransactionDescription(t))))})),(0,s.A)(e,"saveDrafts",(function(){d.A.saveDrafts().then((function(){m.oR.info("Draft transactions saved ✅"),e.props.fetchTransactions()}))})),(0,s.A)(e,"deleteDrafts",(function(){d.A.deleteDrafts().then((function(){m.oR.info("Draft transactions deleted ✅"),e.props.fetchTransactions()}))})),e}return(0,c.A)(t,e),(0,r.A)(t,[{key:"getCrudRuleModal",value:function(){var e=this,t=this.state,n=t.showRulesModal,a=t.selectedTransaction;return i.createElement(g.A,{show:n,rule:{contains:null==a?void 0:a.description},onSave:this.handleRuleSave,onClose:function(){return e.toggleRulesModal()}})}},{key:"getCrudTransactionModal",value:function(){var e=this,t=this.state,n=t.showTransactionModal,a=t.selectedTransaction;return i.createElement(C,{show:n,transaction:a,onSave:this.props.updateTransaction,isDraft:this.props.isDraft,onClose:function(){return e.toggleTransactionModal()}})}},{key:"removeTransactionTag",value:function(e,t){e.appliedRules[t]=0,d.A.upsert(e).then(this.props.updateTransaction)}},{key:"getDefaultTag",value:function(e,t){return i.createElement("span",{className:"badge bg-"+t+" mb-2 me-1"},e)}},{key:"getTag",value:function(e,t){var n,a=this,r=this.props.rulesMap;return i.createElement("div",{key:t,className:"badge bg-primary mb-2 me-1"},null===(n=r[t])||void 0===n?void 0:n.tag,i.createElement("span",{className:"ms-1 cursor-pointer",onClick:function(){return a.removeTransactionTag(e,t)}},"×"))}},{key:"getTransactionTypeBg",value:function(e){return e==p.t2.CREDIT?"success":"warning"}},{key:"getTags",value:function(e){var t=this,n=_.keys(_.pickBy(e.appliedRules,(function(e){return 1==e})));return i.createElement("div",{className:"d-flex "},i.createElement("div",{className:"d-flex flex-wrap"},this.getDefaultTag(e.transactionType,this.getTransactionTypeBg(e.transactionType)),0==n.length&&this.getDefaultTag("Others","danger"),n.map((function(n){return t.getTag(e,n)}))),i.createElement("div",{className:"ms-auto d-flex flex-wrap justify-content-end"},i.createElement("span",{className:"badge bg-dark mb-2 me-1 cursor-pointer",onClick:function(){return t.toggleRulesModal(e)}},"+"),i.createElement("span",{className:"badge bg-dark cursor-pointer mb-2 me-1",onClick:function(){return t.toggleTransactionModal(e)}},i.createElement("i",{className:"bi bi-pencil"})),i.createElement("span",{className:"badge bg-dark cursor-pointer mb-2 me-1",onClick:function(){return t.props.deleteTransaction(e)}},i.createElement("i",{className:"bi bi-trash"}))))}},{key:"getTransactionDate",value:function(e){return i.createElement("div",{className:"mb-1"},i.createElement("strong",null,p.jy[p.WB.DATE],":")," ",(t=e[p.WB.DATE],O(t,"YYYY-MM-DD")).format("MMMM D, YYYY (dddd)"));var t}},{key:"getTransactionAccountGroup",value:function(e){return e.accountGroup&&i.createElement("div",{className:"mb-1"},i.createElement("strong",null,p.jy[p.WB.ACCOUNT_GROUP],":")," ",e.accountGroup)}},{key:"getTransactionAccount",value:function(e){return e.accountGroup&&i.createElement("div",{className:"mb-1"},i.createElement("strong",null,p.jy[p.WB.ACCOUNT_ID],":")," ",e.accountName)}},{key:"getTransactionAmount",value:function(e){return i.createElement("div",{className:"mb-1"},i.createElement("strong",null,p.jy[p.WB.AMOUNT],": "),i.createElement("span",{className:"badge bg-"+this.getTransactionTypeBg(e.transactionType)},"₹",e[p.WB.AMOUNT]))}},{key:"getTransactionDescription",value:function(e){return i.createElement("div",{className:"mb-1"},i.createElement("strong",null,p.jy[p.WB.DESCRIPTION],":")," ",e[p.WB.DESCRIPTION])}},{key:"getTransactionsCountLabel",value:function(e){return i.createElement("div",{className:"d-flex justify-content-center"},i.createElement("span",{className:"text-muted"},"Showing ",e.length," of ",this.props.transactions.length," transactions."))}},{key:"getDraftActions",value:function(e){return this.props.isDraft&&this.props.transactions.length>0&&i.createElement("div",{className:"mt-2 d-flex justify-content-center"},i.createElement("button",{className:"btn btn-primary me-2",onClick:this.saveDrafts},"Save All"),i.createElement("button",{className:"btn btn-danger",onClick:this.deleteDrafts},"Delete All"))}},{key:"getTransactions",value:function(e){return this.props.transactions.length>0&&i.createElement("div",null,i.createElement(I,{filteredTransactions:e}),i.createElement(v,{transactions:e}),this.getTransactionsCountLabel(e),this.getDraftActions(e),i.createElement("div",{className:"row mt-2"},e.slice().reverse().map(this.getTransaction)),this.getDraftActions(e))}},{key:"getAddButton",value:function(){var e=this;return i.createElement("button",{className:"btn btn-dark rounded-circle position-fixed bottom-0 end-0 m-2",onClick:function(){return e.toggleTransactionModal()},style:{width:"50px",height:"50px"}},i.createElement("i",{class:"bi bi-database-fill-add"}))}},{key:"render",value:function(){var e=this.props.filteredTransactions;return i.createElement("div",{className:"mb-2"},this.getTransactions(e),this.getAddButton(),this.getCrudRuleModal(),this.getCrudTransactionModal())}}])}(i.Component);const Y=(0,u.Ng)((function(e){return _.pick(e.user,["accountsMap","rulesMap"])}))(U)},8736:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(4297);const r={extract:function(e,t,n){var r=new FormData;return r.append("accountId",e),r.append("extractor",t),r.append("file",n),a.A.post("/api/v1/transactions/extract",r,{"Content-Type":"multipart/form-data"})},saveDrafts:function(){return a.A.post("/api/v1/transactions/save-drafts")},deleteDrafts:function(){return a.A.post("/api/v1/transactions/delete-drafts")},getAll:function(e,t,n,r){return a.A.get("/api/v1/transactions",{startDate:e,endDate:t,isDraft:n,sortByDate:r})},upsert:function(e){return a.A.post("/api/v1/transaction",e)},delete:function(e){return a.A.delete("/api/v1/transaction/".concat(e))}}}}]);