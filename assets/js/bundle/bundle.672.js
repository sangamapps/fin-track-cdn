"use strict";(self.webpackChunkfin_track_ui=self.webpackChunkfin_track_ui||[]).push([[672],{5672:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(3029),r=a(2901),s=a(4441),c=a(3954),l=a(5501),o=a(6540),i=a(467),u=a(4467),m=a(4756),d=a.n(m),h=a(4277),f=a(6488);function p(){return(p=(0,i.A)(d().mark((function e(t,a){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("extractor",t),n.append("file",a),e.next=5,f.A.post("/api/v1/extract-transactions",n,{headers:{"Content-Type":"multipart/form-data"}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const E={getTransactions:function(e,t){return p.apply(this,arguments)}};var v=a(2543);function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var x={HDFC_AS_XLS_V1:"HDFC - XLS - V1",SBI_AS_XLS_V1:"SBI - XLS - V1",AXIS_AS_PDF_V1:"AXIS - PDF - V1"},A=["DATE","DESCRIPTION","DEBIT","CREDIT","BALANCE"],S=function(e){function t(){var e,a,r,l;(0,n.A)(this,t);for(var o=arguments.length,m=new Array(o),f=0;f<o;f++)m[f]=arguments[f];return a=this,r=t,l=[].concat(m),r=(0,c.A)(r),e=(0,s.A)(a,y()?Reflect.construct(r,l||[],(0,c.A)(a).constructor):r.apply(a,l)),(0,u.A)(e,"state",{chosenExtractor:"HDFC_AS_XLS_V1",chosenFile:null,transactions:[],processed_transactions:[],extractionStatus:0,extracted:0}),(0,u.A)(e,"getTransactions",(function(){if(!e.state.chosenFile)return h.oR.warn("Please select a file");e.setState({extractionStatus:1,extracted:0}),E.getTransactions(e.state.chosenExtractor,e.state.chosenFile).then((function(t){e.setState({transactions:t.transactions,processed_transactions:t.processed_transactions,extractionStatus:0,extracted:1})})).catch((function(t){e.setState({transactions:[],processed_transactions:[],extractionStatus:0,extracted:0}),h.oR.error(t.message)}))})),(0,u.A)(e,"handleExtractorChange",(function(t){e.setState({chosenExtractor:t.target.value,transactions:[],processed_transactions:[],extracted:0})})),(0,u.A)(e,"handleFileUpload",function(){var t=(0,i.A)(d().mark((function t(a){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.target.files[0]){t.next=3;break}return t.abrupt("return",e.setState({chosenFile:null,transactions:[],processed_transactions:[],extracted:0}));case 3:e.setState({chosenFile:n,transactions:[],processed_transactions:[],extracted:0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return(0,l.A)(t,e),(0,r.A)(t,[{key:"showExtractionStatus",value:function(){if(0!==this.state.extractionStatus)return o.createElement("div",{className:"mt-4 d-flex justify-content-center"},o.createElement("div",{className:"spinner-border text-primary text-center",role:"status"},o.createElement("span",{className:"visually-hidden"},"Loading...")))}},{key:"showSummary",value:function(){var e=this.state.processed_transactions;if(0!==e.length){var t=v.sumBy(e,(function(e){return e.DEBIT})),a=v.sumBy(e,(function(e){return e.CREDIT})),n=e[this.state.transactions.length-1].BALANCE;return o.createElement("div",{className:"mt-4"},o.createElement("h5",null,"Summary"),o.createElement("table",{className:"table table-bordered"},o.createElement("thead",{className:"table-dark"},o.createElement("tr",null,o.createElement("th",null,"Total Debits"),o.createElement("th",null,"Total Credits"),o.createElement("th",null,"Closing Balance"))),o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",null,t),o.createElement("td",null,a),o.createElement("td",null,n)))))}}},{key:"getColumns",value:function(e,t){return o.createElement("tr",{key:t},A.map((function(t,a){return o.createElement("td",{key:a},e[t])})))}},{key:"showTransactions",value:function(){var e=this.state.processed_transactions;return 0===e.length?this.state.chosenFile&&this.state.extracted?o.createElement("div",{className:"mt-4 alert alert-danger"}," No transactions found"):void 0:o.createElement("div",{className:"mt-4 overflow-auto"},o.createElement("h5",null,"Transactions"),o.createElement("table",{className:"table table-striped table-hover"},o.createElement("thead",{className:"table-primary"},o.createElement("tr",null,A.map((function(e,t){return o.createElement("th",{key:t},e)})))),o.createElement("tbody",null,e.map(this.getColumns))))}},{key:"render",value:function(){return o.createElement("div",{className:""},o.createElement("div",{className:"card p-3 shadow-lg"},o.createElement("h3",{className:"mb-3"},"Upload Account/Credit Card Statement"),o.createElement("div",{className:"mb-3"},o.createElement("label",{className:"form-label"},"Select Extractor"),o.createElement("select",{className:"form-select",value:this.state.chosenExtractor,onChange:this.handleExtractorChange},Object.keys(x).map((function(e,t){return o.createElement("option",{key:t,value:e},x[e])})))),o.createElement("div",{className:"mb-3"},o.createElement("label",{className:"form-label"},"Upload File"),o.createElement("input",{type:"file",className:"form-control",onChange:this.handleFileUpload})),o.createElement("div",null,o.createElement("button",{className:"btn btn-primary",onClick:this.getTransactions},"Extract"))),this.showExtractionStatus(),this.showSummary(),this.showTransactions())}}])}(o.Component);function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var N=function(e){function t(){return(0,n.A)(this,t),e=this,a=t,r=arguments,a=(0,c.A)(a),(0,s.A)(e,b()?Reflect.construct(a,r||[],(0,c.A)(e).constructor):a.apply(e,r));var e,a,r}return(0,l.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return o.createElement("div",{className:""},o.createElement(S,null))}}])}(o.Component)}}]);