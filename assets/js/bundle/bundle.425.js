"use strict";(self.webpackChunkfin_track_ui=self.webpackChunkfin_track_ui||[]).push([[425],{3145:(t,e,a)=>{function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,{A:()=>n})},5474:(t,e,a)=>{a.d(e,{E5:()=>r,Tv:()=>l,WB:()=>i,_Y:()=>s,jy:()=>o,t2:()=>c});var n=a(4467),r="681626859343-dtkml0ds42u48qg1q5nr07kevma99tfk.apps.googleusercontent.com",s={bank:"Bank",cash:"Cash",credit_card:"Credit Card"},i={DATE:"date",ACCOUNT_GROUP:"accountGroup",ACCOUNT_ID:"accountId",DESCRIPTION:"description",TYPE:"transactionType",AMOUNT:"amount",DEBIT:"debit",CREDIT:"credit",BALANCE:"balance"},o=(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},i.DATE,"Date"),i.ACCOUNT_GROUP,"Account Group"),i.ACCOUNT_ID,"Account"),i.TYPE,"Transaction Type"),i.AMOUNT,"Amount"),i.DESCRIPTION,"Description"),c={DEBIT:"DEBIT",CREDIT:"CREDIT"},l={HDFC_AS_XLS_V1:"HDFC - XLS - V1",SBI_AS_XLS_V1:"SBI - XLS - V1",AXIS_AS_PDF_V1:"AXIS - PDF - V1"}},7425:(t,e,a)=>{a.r(e),a.d(e,{default:()=>S});var n=a(3145),r=a(7800);var s=a(3029),i=a(2901),o=a(4441),c=a(3954),l=a(5501),u=a(4467),p=a(6540),m=a(1225),d=a(378),f=a(4625),h=a(8736),v=a(5474),g=a(2543);function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}var E=function(t){function e(){var t,a,n,r;(0,s.A)(this,e);for(var i=arguments.length,l=new Array(i),p=0;p<i;p++)l[p]=arguments[p];return a=this,n=e,r=[].concat(l),n=(0,c.A)(n),t=(0,o.A)(a,F()?Reflect.construct(n,r||[],(0,c.A)(a).constructor):n.apply(a,r)),(0,u.A)(t,"handleFilterChange",(function(e){t.props.handleFilterChange(e.target.name,e.target.value)})),t}return(0,l.A)(e,t),(0,i.A)(e,[{key:"render",value:function(){var t=this.props,e=t.accountsMap,a=t.rulesMap,n=t.filters;return p.createElement("div",{className:"p-3 shadow-lg bg-primary-subtle"},p.createElement("div",{className:"row"},p.createElement("div",{className:"col-md-3 col-sm-12 mb-2"},p.createElement("div",{className:"input-group"},p.createElement("span",{className:"input-group-text"},"From"),p.createElement("input",{type:"date",name:"startDateFilter",value:n.startDateFilter,className:"form-control",onChange:this.handleFilterChange}))),p.createElement("div",{className:"col-md-3 col-sm-12 mb-2"},p.createElement("div",{className:"input-group"},p.createElement("span",{className:"input-group-text"},"To"),p.createElement("input",{type:"date",name:"endDateFilter",value:n.endDateFilter,className:"form-control",onChange:this.handleFilterChange}))),e&&p.createElement("div",{className:"col-md-3 col-sm-12 mb-2"},p.createElement("div",{className:"input-group"},p.createElement("span",{className:"input-group-text"},"Account Group"),p.createElement("select",{name:"accountGroupFilter",value:n.accountGroupFilter,className:"form-control",onChange:this.handleFilterChange},p.createElement("option",{value:""},"All"),g.keys(g.groupBy(this.props.accountsMap,"accountGroup")).map((function(t,e){return p.createElement("option",{key:e,value:t},v._Y[t])}))))),e&&p.createElement("div",{className:"col-md-3 col-sm-12 mb-2"},p.createElement("div",{className:"input-group"},p.createElement("span",{className:"input-group-text"},"Account"),p.createElement("select",{name:"accountIdFilter",value:n.accountIdFilter,className:"form-control",onChange:this.handleFilterChange},p.createElement("option",{value:""},"All"),g.values(this.props.accountsMap).map((function(t,e){return p.createElement("option",{key:e,value:t._id},t.name," (",v._Y[t.accountGroup],")")}))))),p.createElement("div",{className:"col-md-3 col-sm-12 mb-2"},p.createElement("div",{className:"input-group"},p.createElement("span",{className:"input-group-text"},"Transaction Type"),p.createElement("select",{name:"transactionTypeFilter",value:n.transactionTypeFilter,className:"form-control",onChange:this.handleFilterChange},p.createElement("option",{value:""},"All"),p.createElement("option",{value:v.t2.DEBIT},"Debit"),p.createElement("option",{value:v.t2.CREDIT},"Credit")))),p.createElement("div",{className:"col-md-3 col-sm-12 mb-2"},p.createElement("div",{className:"input-group"},p.createElement("span",{className:"input-group-text"},"Tag"),p.createElement("select",{name:"tagFilter",value:n.tagFilter,className:"form-control",onChange:this.handleFilterChange},p.createElement("option",{value:""},"All"),p.createElement("option",{value:"__NONE__"},"Others"),g.values(a).map((function(t,e){return p.createElement("option",{key:e,value:t._id},t.tag)}))))),p.createElement("div",{className:"col-md-3 col-sm-12 mb-2"},p.createElement("div",{className:"input-group"},p.createElement("span",{className:"input-group-text"},"Search"),p.createElement("input",{type:"search",name:"searchFilter",value:n.searchFilter,className:"form-control",onChange:this.handleFilterChange})))),p.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.props.resetFilters},"Reset filters"))}}])}(p.Component);const A=(0,m.Ng)((function(t){return g.pick(t.user,["accountsMap","rulesMap"])}))(E);var y=a(2543);var N=a(2543);const T=function(t,e,a,n){return N.filter(t,(function(t){return!(!N.isEmpty(e.accountGroupFilter)&&a[t.accountId].accountGroup!=e.accountGroupFilter)&&!(!N.isEmpty(e.accountIdFilter)&&t.accountId!=e.accountIdFilter)&&!(!N.isEmpty(e.transactionTypeFilter)&&t.transactionType!=e.transactionTypeFilter)&&(function(t,e){e.forEach((function(e){var a=e._id,n=e.contains;if(t.appliedRules=t.appliedRules||{},!(a in t.appliedRules)){var r=y.lowerCase(t.description),s=y.split(y.lowerCase(n),",");y.some(s,(function(t){return r.includes(t)}))&&(t.appliedRules[a]=1)}}))}(t,n),N.isEmpty(e.tagFilter)?!(!N.isEmpty(e.searchFilter)&&!N.includes(N.lowerCase(t.description),N.lowerCase(e.searchFilter))):("__NONE__"==e.tagFilter&&0==N.size(N.pickBy(t.appliedRules,(function(t){return 1==t})))||e.tagFilter in t.appliedRules&&1==t.appliedRules[(void 0).state.tagFilter])&&t)}))};var D=a(9097),C=a(3632),b=a(2543);function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){(0,u.A)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(O=function(){return!!t})()}var k=function(t){function e(){var t,a,i,l;(0,s.A)(this,e);for(var p=arguments.length,m=new Array(p),f=0;f<p;f++)m[f]=arguments[f];return a=this,i=e,l=[].concat(m),i=(0,c.A)(i),t=(0,o.A)(a,O()?Reflect.construct(i,l||[],(0,c.A)(a).constructor):i.apply(a,l)),(0,u.A)(t,"state",I(I({},t.getInitialFilters()),{},{transactions:[],transactionsLoading:!1})),(0,u.A)(t,"handleFilterChange",(function(e,a){t.setState((0,u.A)({},e,a),(function(){"startDateFilter"!=e&&"endDateFilter"!=e||t.fetchTransactions()}))})),(0,u.A)(t,"resetFilters",(function(){t.setState(t.getInitialFilters(),t.fetchTransactions)})),(0,u.A)(t,"updateTransaction",(function(e){t.setState((function(t){var a,s=function(t){if(Array.isArray(t))return(0,n.A)(t)}(a=t.transactions)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||(0,r.A)(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=b.findIndex(s,(function(t){return t._id===e._id}));return i>=0?s[i]=e:s.push(e),{transactions:s,showTransactionModal:!1}}))})),(0,u.A)(t,"deleteTransaction",(function(e){h.A.delete(e._id).then((function(e){t.setState((function(t){return{transactions:t.transactions.filter((function(t){return t._id!==e._id}))}}),(function(){return d.oR.info("Transaction deleted âœ…")}))}))})),(0,u.A)(t,"fetchTransactions",(function(){t.setState({transactions:[],transactionsLoading:!0}),h.A.getAll(t.state.startDateFilter,t.state.endDateFilter,t.props.isDraft).then((function(e){t.setState({transactions:e.transactions,transactionsLoading:!1})}))})),t}return(0,l.A)(e,t),(0,i.A)(e,[{key:"getInitialFilters",value:function(){return{startDateFilter:this.props.startDateFilter||"",endDateFilter:this.props.endDateFilter||"",accountGroupFilter:"",accountIdFilter:"",transactionTypeFilter:"",tagFilter:"",searchFilter:""}}},{key:"getFilters",value:function(){return{startDateFilter:this.state.startDateFilter,endDateFilter:this.state.endDateFilter,accountGroupFilter:this.state.accountGroupFilter,accountIdFilter:this.state.accountIdFilter,transactionTypeFilter:this.state.transactionTypeFilter,tagFilter:this.state.tagFilter,searchFilter:this.state.searchFilter}}},{key:"getFiltersView",value:function(){return p.createElement(A,{filters:this.getFilters(),handleFilterChange:this.handleFilterChange,resetFilters:this.resetFilters})}},{key:"getNoTransactionsLabel",value:function(){return this.props.isDraft?p.createElement("div",{className:"text-muted"},"No drafts transactions found.",p.createElement("div",null,"Visit ",p.createElement(f.N_,{to:"/transactions/upload-statement"},"Upload Statements")," page to extract transactions from statements."),p.createElement("div",null,"Visit ",p.createElement(f.N_,{to:"/transactions"},"Transactions")," page to see the saved transactions.")):p.createElement("div",{className:"text-muted"},"No transactions found.",p.createElement("div",null,"Visit ",p.createElement(f.N_,{to:"/transactions/upload-statement"},"Upload Statements")," page to extract transactions from statements."),p.createElement("div",null,"Visit ",p.createElement(f.N_,{to:"/transactions/drafts"},"Edit Drafts")," page to edit and save draft transactions."))}},{key:"getLoader",value:function(){return this.state.transactionsLoading?C.A.spinnerLoader("mt-3"):0==this.state.transactions.length?p.createElement("div",{className:"mt-3 mb-3 text-center"},this.getNoTransactionsLabel()):void 0}},{key:"getFilteredTransactions",value:function(){return T(this.state.transactions,this.getFilters(),this.props.accountsMap,this.props.rules)}},{key:"getLayoutBody",value:function(){var t=this.props.LayoutBody,e=this.getFilteredTransactions();return p.createElement(D.A,{component:t,isDraft:this.props.isDraft,transactions:this.state.transactions,filteredTransactions:e,updateTransaction:this.updateTransaction,deleteTransaction:this.deleteTransaction,fetchTransactions:this.fetchTransactions})}},{key:"render",value:function(){return p.createElement("div",{className:""},this.getFiltersView(),this.getLoader(),this.getLayoutBody())}},{key:"componentDidMount",value:function(){this.fetchTransactions()}}])}(p.Component);const S=(0,m.Ng)((function(t){return b.pick(t.user,["accountsMap","rules"])}))(k)},7800:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(3145);function r(t,e){if(t){if("string"==typeof t)return(0,n.A)(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,n.A)(t,e):void 0}}},8736:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(4297);const r={extract:function(t,e,a){var r=new FormData;return r.append("accountId",t),r.append("extractor",e),r.append("file",a),n.A.post("/api/v1/transactions/extract",r,{"Content-Type":"multipart/form-data"})},saveDrafts:function(){return n.A.post("/api/v1/transactions/save-drafts")},deleteDrafts:function(){return n.A.post("/api/v1/transactions/delete-drafts")},getAll:function(t,e,a){return n.A.get("/api/v1/transactions",{startDate:t,endDate:e,isDraft:a})},upsert:function(t){return n.A.post("/api/v1/transaction",t)},delete:function(t){return n.A.delete("/api/v1/transaction/".concat(t))}}}}]);